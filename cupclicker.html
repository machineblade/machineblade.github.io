<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cup Clicker (v3.5.0)</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f7f9fc, #e1e8f0);
      color: #333;
      text-align: center;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: background 1s ease;
      overflow-x: hidden;
    }

    h1 {
      margin-top: 40px;
      font-size: 3em;
      color: #2c3e50;
      text-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }

    #game-area {
      position: relative;
      margin: 40px 0;
      width: 340px;
      height: 340px;
    }

    #cup {
      width: 160px;
      cursor: pointer;
      transition: transform 0.1s ease, filter 0.2s ease;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2;
    }

    #cup:active {
      transform: translate(-50%, -50%) scale(0.9);
      filter: brightness(1.1);
    }

    #orbit-container {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0; left: 0;
      z-index: 1;
      pointer-events: none;
    }

    .orbit-cup {
      position: absolute;
      transform: translate(-50%, -50%);
      transform-origin: center center;
    }

    #cups {
      font-size: 24px;
      font-weight: bold;
      color: #2c3e50;
      margin-bottom: 30px;
    }

    #toggle-shop {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #0078d7;
      color: white;
      font-size: 24px;
      cursor: pointer;
      width: 48px;
      height: 48px;
      line-height: 48px;
      text-align: center;
      border-radius: 50%;
      box-shadow: 0 6px 12px rgba(0,0,0,0.25);
      user-select: none;
      z-index: 1000;
    }

    #shop {
      position: fixed;
      top: 80px;
      right: 30px;
      width: 320px;
      max-height: 80vh;
      overflow-y: auto;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
      padding: 20px;
      display: none;
      flex-direction: column;
      z-index: 999;
    }

    .shop-item {
      background: #f7f7f7;
      padding: 12px;
      border-radius: 6px;
      margin-bottom: 15px;
      text-align: left;
      border: 1px solid #eee;
    }

    .shop-item strong { display:block; font-size:18px; color:#2d3e50; margin-bottom:5px; }
    .shop-item button {
      background: #0078d7;
      color: white; border: none;
      padding: 8px 14px;
      border-radius: 5px; cursor: pointer;
      margin-top: 8px;
    }
    .shop-item button:disabled { background:#aaa; cursor:not-allowed; }

    #reset-button {
      margin-top: 15px; padding: 10px 16px;
      font-size: 16px; background: #d9534f;
      color:white; border:none;
      border-radius: 6px; cursor:pointer;
    }
    #reset-button:hover { background:#c9302c; }

    /* FULLSCREEN END SCREEN */
    #completion-popup {
      position: fixed;
      top: 100%;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #FFD580, #FF8C42);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 3em;
      font-weight: bold;
      text-align: center;
      z-index: 2000;
      transition: top 1s ease;
      flex-direction: column;
    }

    #completion-popup.show { top: 0; }

    #play-again {
      margin-top: 30px;
      font-size: 1rem;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      background: #fff;
      color: #d35400;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.2s ease;
    }
    #play-again:hover { background: #f2f2f2; }
  </style>
</head>
<body>

  <div id="toggle-shop">â˜°</div>

  <div id="shop">
    <div class="shop-item">
      <strong>Cursor</strong> (+5 per click)<br>
      Cost: <span id="cursor-cost">50</span> cups<br>
      <button id="btn-cursor" onclick="buyUpgrade('cursor')">Buy</button>
    </div>
    <div class="shop-item">
      <strong>Cup Generator</strong> (+5 per second)<br>
      Cost: <span id="generator-cost">100</span> cups<br>
      <button id="btn-generator" onclick="buyUpgrade('generator')">Buy</button>
    </div>
    <div class="shop-item">
      <strong>Double Power</strong> (double clicks for 10s)<br>
      Cost: <span id="double-cost">1000</span> cups<br>
      <button id="btn-double" onclick="buyUpgrade('double')">Buy</button>
    </div>
    <div class="shop-item">
      <strong>Auto Clicker</strong> (+22 per second)<br>
      Cost: <span id="autoclicker-cost">500</span> cups<br>
      <button id="btn-autoclicker" onclick="buyUpgrade('autoclicker')">Buy</button>
    </div>
    <div class="shop-item">
      <strong>Golden Cup</strong> (doubles all CPS)<br>
      Cost: <span id="golden-cost">5000</span> cups<br>
      <button id="btn-golden" onclick="buyUpgrade('golden')">Buy</button>
    </div>
    <div class="shop-item">
      <strong>Mega Generator</strong> (+100 per second)<br>
      Cost: <span id="mega-cost">20000</span> cups<br>
      <button id="btn-mega" onclick="buyUpgrade('mega')">Buy</button>
    </div>
    <div class="shop-item">
      <strong>Prestige</strong> (reset, permanently double gains)<br>
      Cost: <span id="prestige-cost">100000</span> cups<br>
      <button id="btn-prestige" onclick="buyUpgrade('prestige')">Buy</button>
    </div>
    <button id="reset-button" onclick="resetGame()">Reset Game</button>
  </div>

  <h1>Cup Clicker</h1>
  <div id="game-area">
    <img id="cup" src="images/cup.png" alt="Cup" />
    <div id="orbit-container"></div>
  </div>

  <div id="cups">Cups: 0</div>

  <!-- Fullscreen completion popup -->
  <div id="completion-popup">
    ðŸŽ‰ Congrats, you have completed the game! ðŸŽ‰
    <button id="play-again">Play Again</button>
  </div>

  <!-- Sound Effects -->
  <audio id="click-sound" src="sounds/clickCup.wav" preload="auto"></audio>
  <audio id="buy-sound" src="sounds/buyItem.wav" preload="auto"></audio>
  <audio id="open-sound" src="sounds/openShop.wav" preload="auto"></audio>

  <script>
    const SUFFIXES=["","k","M","B","T","Qa","Qi","Sx","Sp","Oc","No"];
    function formatNumber(num){
      if(num<1000) return num.toString();
      let e=0,n=num;
      while(n>=1000 && e<SUFFIXES.length-1){ n/=1000; e++; }
      return n.toFixed(2).replace(/\.?0+$/,"")+SUFFIXES[e];
    }

    let cups=0, cupsPerClick=1, cupsPerSecond=0, multiplier=1;
    let orbitCups=[];
    let doubleActive=false, doubleTimer=0; const DOUBLE_DURATION=10;
    let angle=0;
    let gameCompleted=false;
    const WIN_AMOUNT=5e16; // 50 quadrillion

    // Costs
    const cursorCost=50;
    const generatorCost=100;
    let doubleCost=1000;
    let autoclickerCost=500;
    let goldenCost=5000;
    let megaCost=20000;
    let prestigeCost=100000;

    const cupsDisplay=document.getElementById("cups");
    const orbContainer=document.getElementById("orbit-container");
    const clickSound=document.getElementById("click-sound");
    const buySound=document.getElementById("buy-sound");
    const openSound=document.getElementById("open-sound");

    document.getElementById("cup").addEventListener("click",()=>{
      let gain=cupsPerClick*multiplier;
      if(doubleActive) gain*=2;
      cups+=gain;
      if(clickSound){ clickSound.currentTime=0; clickSound.play(); }
      checkWin();
      updateDisplay(); updateButtons();
    });

    function updateDisplay(){
      cupsDisplay.innerText="Cups: "+formatNumber(cups);
      document.getElementById("cursor-cost").innerText=formatNumber(cursorCost);
      document.getElementById("generator-cost").innerText=formatNumber(generatorCost);
      document.getElementById("double-cost").innerText=formatNumber(doubleCost);
      document.getElementById("autoclicker-cost").innerText=formatNumber(autoclickerCost);
      document.getElementById("golden-cost").innerText=formatNumber(goldenCost);
      document.getElementById("mega-cost").innerText=formatNumber(megaCost);
      document.getElementById("prestige-cost").innerText=formatNumber(prestigeCost);
    }

    function updateButtons(){
      document.getElementById("btn-cursor").disabled=cups<cursorCost;
      document.getElementById("btn-generator").disabled=cups<generatorCost;
      document.getElementById("btn-double").disabled=cups<doubleCost;
      document.getElementById("btn-autoclicker").disabled=cups<autoclickerCost;
      document.getElementById("btn-golden").disabled=cups<goldenCost;
      document.getElementById("btn-mega").disabled=cups<megaCost;
      document.getElementById("btn-prestige").disabled=cups<prestigeCost;
    }

    function buyUpgrade(type){
      if(type==="cursor" && cups>=cursorCost){
        cups-=cursorCost; cupsPerClick+=5;
      }
      else if(type==="generator" && cups>=generatorCost){
        cups-=generatorCost; cupsPerSecond+=5;
        addOrbitCup(40);
      }
      else if(type==="double" && cups>=doubleCost){
        cups-=doubleCost; doubleActive=true; doubleTimer=DOUBLE_DURATION;
      }
      else if(type==="autoclicker" && cups>=autoclickerCost){
        cups-=autoclickerCost; cupsPerSecond+=22;
        addOrbitCup(80);
      }
      else if(type==="golden" && cups>=goldenCost){
        cups-=goldenCost; multiplier*=2;
      }
      else if(type==="mega" && cups>=megaCost){
        cups-=megaCost; cupsPerSecond+=100;
        addOrbitCup(120);
      }
      else if(type==="prestige" && cups>=prestigeCost){
        cups=0; cupsPerClick=1; cupsPerSecond=0; multiplier*=2;
        orbitCups.forEach(c=>c.el.remove()); orbitCups=[];
      }
      if(buySound){ buySound.currentTime=0; buySound.play(); }
      updateDisplay(); updateButtons();
    }

    function addOrbitCup(size){
      let cup=document.createElement("img");
      cup.src="images/cup.png";
      cup.className="orbit-cup";
      cup.style.width=size+"px";
      orbContainer.appendChild(cup);
      orbitCups.push({el:cup,size});
    }

    setInterval(()=>{
      cups+=cupsPerSecond*multiplier;
      if(doubleActive){ 
        doubleTimer--; if(doubleTimer<=0) doubleActive=false; 
      }
      checkWin();
      updateDisplay(); updateButtons();
    },1000);

    function animateOrbit(){
      angle+=0.01;
      let radius=140;
      orbitCups.forEach((cupObj,i)=>{
        let el=cupObj.el;
        let offset=(2*Math.PI/orbitCups.length)*i;
        let x=170+radius*Math.cos(angle+offset);
        let y=170+radius*Math.sin(angle+offset);
        el.style.left=x+"px"; el.style.top=y+"px";
        let dx=170-x, dy=170-y;
        let rotation=Math.atan2(dy,dx)*(180/Math.PI)+90;
        el.style.transform=`translate(-50%, -50%) rotate(${rotation}deg)`;
        el.style.width=cupObj.size+"px";
      });
      requestAnimationFrame(animateOrbit);
    }
    animateOrbit();

    function resetGame(){
      cups=0; cupsPerClick=1; cupsPerSecond=0; multiplier=1; doubleActive=false;
      orbitCups.forEach(c=>c.el.remove()); orbitCups=[];
      document.getElementById("completion-popup").classList.remove("show");
      gameCompleted=false;
      updateDisplay(); updateButtons();
    }

    function checkWin(){
      if(!gameCompleted && cups>=WIN_AMOUNT){
        gameCompleted=true;
        document.getElementById("completion-popup").classList.add("show");
      }
    }

    document.getElementById("toggle-shop").addEventListener("click",()=>{
      const shop=document.getElementById("shop");
      shop.style.display= shop.style.display==="flex" ? "none":"flex";
      if(openSound){ openSound.currentTime=0; openSound.play(); }
    });

    document.getElementById("play-again").addEventListener("click",()=>{
      resetGame();
    });

    updateDisplay(); updateButtons();
  </script>
</body>
</html>
